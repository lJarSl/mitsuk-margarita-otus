<html>
    <head></head>
    <style>
        .rsslink__body div {
            margin-bottom: 10px;
        }
        .rsslink__output-status {
            color: green;
        }
        .error {
            color: red!important;
        }
        .rsslink__output-status {
            height: 1em;
        }
    </style>

    <body>
        <h1 class="header">NodeJS Rest API !!!!!!!!!!</h1>

        <div class="menu">
            <a href="/">Rss Cannels</a>
        </div>

        <div class="rsslink">
            <div class="rsslink__header">
                <h2 class="rsslink__title">Rss Articles</h2>
            </div>
            <div class="rsslink__body">
                <div class="rsslink__name-select">
                    <select name="" id="rssId">
                        <option value="">not selected</option>
                    </select>
                </div> 
                <div class="rsslink__output-status"></div>
                <div class="rsslink__btn">
                    <button onclick="getArticles(rssId.value)">get</button>
                </div> 
                <div class="rsslink__list"></div>
            </div>
        </div>

    <script>
        function addClass(el, className){
            if (el.classList) {
                el.classList.add(className);
            }
            else {
                el.className += ' ' + className;
            }
        }

        function removeClass(el) {
            if (el.classList){
                el.classList.remove(className);
            } else {
                el.className = el.className.replace(new RegExp('(^|\\b)' + className.split(' ').join('|') + '(\\b|$)', 'gi'), ' ');
            }
                
        }


        function getRssChannels() {

             fetch('/getallrss')
            .then(function(response) {
                return response.json();
            })
            .then(function(res) {
                let rsslink__output = document.querySelector('.rsslink__output-status');
                let rsslink__select = document.querySelector('.rsslink__name-select select');
                if (res.error) {
                    rsslink__output.innerHTML = res.error;
                    addClass(rsslink__output, 'error');
                    return false;
                }

                res.forEach(function(item, i) {
                    var option = document.createElement("option");
                    option.text = item.title;
                    option.id = item._id;
                    rsslink__select.add(option);
                })

            })
            .catch( console.log );

        }



        window.onload = function () {
            getRssChannels();
        }
    </script>

    </body>
</html>